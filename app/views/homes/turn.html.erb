<div class="box3"></div>
   

<head>
  <script>
 
    const parameters = $.param({
  method: 'flickr.photos.search',
  api_key: "8b44017d542775db6bf5a9d074fddd21",
  text: 'food', // 検索テキスト
  sort: 'date-posted-desc', // 興味深さ順
  per_page: 5, // 取得件数
  license: '4', // Creative Commons Attributionのみ
  extras: 'url_h,date_taken', // 追加で取得する情報
  format: 'json', // レスポンスをJSON形式に
  nojsoncallback: 1, // レスポンスの先頭に関数呼び出しを含めない
});

const url = `https://api.flickr.com/services/rest/?${parameters}`;
// console.log(url);

$(document).ready(function () {
  $('#result').html(`<a href= ${url} class="act" target="_blank" >MESHITERO</a>`);
});

var xmlHttpRequest = new XMLHttpRequest();
xmlHttpRequest.onreadystatechange = function()
{
    console.log(this.readyState);
    if( this.readyState == 4 && this.status == 200 )
    {
        if( this.response )
        {
            console.log(this.response);
            // 読み込んだ後処理したい内容をかく
            console.log(this.response.photos.photo[2].url_h);
            document.getElementById("photo1").setAttribute('src',this.response.photos.photo[2].url_h);
            //$('#photo1').attr('src',this.response.photos.photo[1].url_h);
            console.log(document.getElementById("photo1"));

        }
    }
}

xmlHttpRequest.open( 'GET', url , true );
xmlHttpRequest.responseType = 'json';
xmlHttpRequest.send( null );
  </script>
  <!--<div id="result"></div>-->
  <!--</head>-->

<img src="" id="photo1" width="500px">
<div>
  <p class="migi"><%= link_to "topへ戻る", root_path %></p>
</div>


<form name="myform" class="myForm2">
<textarea  name="myformes" class="myForm2"></textarea>
</form>